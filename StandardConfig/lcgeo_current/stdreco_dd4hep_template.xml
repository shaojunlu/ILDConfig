<!--
   Example steering file to run the standard reconstruction
   using DDRec on events simulated with DD4hep/lcgeo for
   detectors ILD_l4_v02 and ILD_s4_v02 (and compatible).
   
   Based on bbudsc_3evt_stdreco.xml form ILDconfig
   
   Status:  - work in progress
   
   @author F.Gaede, CERN/DESY
   @date Jul, 2015 2014
  -->


<marlin>
  
  <execute>
    <processor name="MyAIDAProcessor"/>
    <processor name="InitDD4hep"/>
    <processor name="MyStatusmonitor" />
    <processor name="MySplitCollectionByLayer" />
    <processor name="VXDPlanarDigiProcessor_CMOSVXD5"/>
    <processor name="SITPlanarDigiProcessor"/>
    <processor name="FTDPixelPlanarDigiProcessor"/>
    <processor name="FTDStripPlanarDigiProcessor"/>
    <processor name="FTDDDSpacePointBuilder" />
    <processor name="SETPlanarDigiProcessor"/>
    <processor name="SETDDSpacePointBuilder" />
    <processor name="MyTPCDigiProcessor"/>
    <processor name="MyClupatraProcessor" />
    <processor name="MySiliconTracking_MarlinTrk"/>  
    <processor name="MyForwardTracking"/>
    <processor name="MyTrackSubsetProcessor"/>
    <processor name="MyFullLDCTracking_MarlinTrk"/>
    <processor name="MyCompute_dEdxProcessor"/> 
    <processor name="MyV0Finder"/>
    <processor name="MyKinkFinder"/>

    <!-- <if condition="global.GearXMLFile==gear_ILD_l4_v02.xml"> -->
    <!-- <if condition="gear_ILD_l4_v02.xml"> -->
    <if condition="true">
      <processor name="MyEcalBarrelDigi_ILD_l4_v02"/>
      <processor name="MyEcalBarrelReco_ILD_l4_v02"/>
      <processor name="MyEcalEndcapDigi_ILD_l4_v02"/>
      <processor name="MyEcalEndcapReco_ILD_l4_v02"/>
      <processor name="MyEcalRingDigi_ILD_l4_v02"/>
      <processor name="MyEcalRingReco_ILD_l4_v02"/>
      <processor name="MyHcalBarrelDigi_ILD_l4_v02"/>
      <processor name="MyHcalBarrelReco_ILD_l4_v02"/>
      <processor name="MyHcalEndcapDigi_ILD_l4_v02"/>
      <processor name="MyHcalEndcapReco_ILD_l4_v02"/>
      <processor name="MyHcalRingDigi_ILD_l4_v02"/>
      <processor name="MyHcalRingReco_ILD_l4_v02"/>
    </if>

    <!--
    <if condition="false">
      <processor name="MyEcalBarrelDigi_ILD_s4_v02"/>
      <processor name="MyEcalBarrelReco_ILD_s4_v02"/>
      <processor name="MyEcalEndcapDigi_ILD_s4_v02"/>
      <processor name="MyEcalEndcapReco_ILD_s4_v02"/>
      <processor name="MyEcalRingDigi_ILD_s4_v02"/>
      <processor name="MyEcalRingReco_ILD_s4_v02"/>
      <processor name="MyHcalBarrelDigi_ILD_s4_v02"/>
      <processor name="MyHcalBarrelReco_ILD_s4_v02"/>
      <processor name="MyHcalEndcapDigi_ILD_s4_v02"/>
      <processor name="MyHcalEndcapReco_ILD_s4_v02"/>
      <processor name="MyHcalRingDigi_ILD_s4_v02"/>
      <processor name="MyHcalRingReco_ILD_s4_v02"/>
    </if>
    -->

    <processor name="MyEcalBarrelGapFiller"/>
    <processor name="MyEcalEndcapGapFiller"/>
    
    <processor name="MySimpleBCalDigi"/>
    <processor name="MySimpleLCalDigi"/>
    <processor name="MySimpleLHCalDigi"/>
    <processor name="MySimpleMuonDigi"/>

    <if condition="true">
      <processor name="MyDDMarlinPandora_ILD_l4_v02"/>
    </if>

    <!--
    <if condition="false">
      <processor name="MyDDMarlinPandora_ILD_s4_v02"/>
    </if>
    -->

    <processor name="MyAdd4MomCovMatrixCharged"/>
    <processor name="MyAddClusterProperties"/>
    <processor name="MyComputeShowerShapesProcessor"/>    
    <processor name="MyPi0Finder"/>
    <processor name="MyEtaFinder"/> 
    <processor name="MyEtaPrimeFinder"/>  
    <processor name="MyGammaGammaSolutionFinder"/> 
    <processor name="MyDistilledPFOCreator"/> 
    <processor name="MyLikelihoodPID" />
    <processor name="MyRecoMCTruthLinker"/> 
    <processor name="VertexFinder"/>
    <processor name="MyLCIOOutputProcessor"/>
    <processor name="DSTOutput"/>
    <processor name="MyPfoAnalysis"/>
  </execute>

  <global>
    <parameter name="LCIOInputFiles">
      bbudsc_3evt.slcio
    </parameter>
    <parameter name="GearXMLFile" value="gear_ILD_l4_v02.xml"/>
    <parameter name="MaxRecordNumber" value="0"/>
    <parameter name="SkipNEvents" value="0"/>
    <parameter name="SupressCheck" value="false"/>
    <parameter name="Verbosity" options="DEBUG0-4,MESSAGE0-4,WARNING0-4,ERROR0-4,SILENT"> MESSAGE </parameter>
    <parameter name="RandomSeed" value="1234567890" />
  </global>

  <processor name="MyLCIOOutputProcessor" type="LCIOOutputProcessor">
    <parameter name="LCIOOutputFile" type="string" >
      ./bbudsc_3evt_REC_ttt.slcio
    </parameter>
    <parameter name="LCIOWriteMode" type="string" value="WRITE_NEW"/>
    <!--parameter name="SplitFileSizekB" type="int" value="1992294"/-->
  </processor>

  <processor name="InitDD4hep" type="InitializeDD4hep">
    <parameter name="DD4hepXMLFile" type="string"> $lcgeo_DIR/ILD/compact/ILD_l4_v02/ILD_l2_v02.xml </parameter>
  </processor>
  

  <processor name="MySplitCollectionByLayer" type="SplitCollectionByLayer">
    <parameter name="InputCollection" type="string">FTDCollection </parameter>
    <parameter name="OutputCollections" type="StringVec">FTD_PIXELCollection 0 1 FTD_STRIPCollection 2 6  </parameter>
  </processor>

  <processor name="DSTOutput" type="LCIOOutputProcessor">
    <parameter name="LCIOOutputFile" type="string" >
      ./bbudsc_3evt_DST_ttt.slcio 
    </parameter>
    <parameter name="DropCollectionTypes" type="StringVec"> 
      MCParticle 
      SimTrackerHit 
      SimCalorimeterHit
      TrackerHit 
      TrackerHitPlane 
      CalorimeterHit 
      LCRelation
      Track 
      LCFloatVec      
    </parameter>
    <parameter name="FullSubsetCollections" type="StringVec" value="MCParticlesSkimmed"/>
    <parameter name="KeepCollectionNames" type="StringVec"> 
      MCParticlesSkimmed 
      MarlinTrkTracks
      MCTruthMarlinTrkTracksLink
      MarlinTrkTracksMCTruthLink
      RecoMCTruthLink
    </parameter>
    <parameter name="LCIOWriteMode" type="string" value="WRITE_NEW"/>
  </processor>
  
  <processor name="MyStatusmonitor" type="Statusmonitor">
    <parameter name="HowOften" type="int">1 </parameter>
  </processor>
  
  <processor name="MyAIDAProcessor" type="AIDAProcessor">
    <parameter name="Compress" type="int" value="1"/>
    <parameter name="FileName" type="string" value="bbudsc_3evt_stdreco_ttt"/>
    <parameter name="FileType" type="string" value="root "/>
  </processor>

  <processor name="BgOverlay" type="Overlay">
    <parameter name="CollectionMap" type="StringVec">
      BeamCalCollection                     BeamCalCollection                     
      EcalBarrelCollection                  EcalBarrelCollection           
      EcalEndcapsCollection                 EcalEndcapsCollection           
      EcalEndcapRingCollection              EcalEndcapRingCollection              
      FTDCollection                         FTDCollection                   
      HcalBarrelRegCollection               HcalBarrelRegCollection               
      HcalEndcapRingCollection              HcalEndcapRingCollection             
      HcalEndcapsCollection                 HcalEndcapsCollection                 
      LumiCalCollection                     LumiCalCollection  
      LHCalCollection                       LHCalCollection
      MCParticle                            MCParticle                            
      YokeBarrelCollection                  YokeBarrelCollection                  
      YokeEndcapsCollection                 YokeEndcapsCollection                  
      SETCollection                         SETCollection                         
      SITCollection                         SITCollection                         
      TPCCollection                         TPCCollection                         
      VXDCollection                         VXDCollection                         
    </parameter>
    <parameter name="InputFileNames" type="StringVec"> 
      v01-19-01.E0500-TDR_ws.Paaddhad.Gwhizard-1.95.eB.pB.I37580.01_ILD_l1_v01_SIM.slcio
    </parameter>
    <parameter name="NumberOverlayEvents" type="int"> 0 </parameter>
    <parameter name="expBG" type="double">4.1 </parameter>
    <parameter name="runOverlay" type="bool">false </parameter>
    <parameter name="NSkipEventsRandom" type="int">0</parameter>
  </processor>

  <processor name="VXDPlanarDigiProcessor_CMOSVXD5" type="DDPlanarDigiProcessor">
    <parameter name="ForceHitsOntoSurface" type="bool">true </parameter>
    <parameter name="SubDetectorName" type="string"> VXD </parameter>
    <parameter name="IsStrip" type="bool">false </parameter>
    <parameter name="ResolutionU" type="float"> 0.003 0.003 0.003 0.003 0.003 0.003 </parameter>
    <parameter name="ResolutionV" type="float"> 0.003 0.003 0.003 0.003 0.003 0.003  </parameter>
    <parameter name="SimTrackHitCollectionName" type="string" lcioInType="SimTrackerHit">VXDCollection </parameter>
    <parameter name="SimTrkHitRelCollection" type="string" lcioOutType="LCRelation">VXDTrackerHitRelations </parameter>
    <parameter name="TrackerHitCollectionName" type="string" lcioOutType="TrackerHitPlane">VXDTrackerHits </parameter>
  </processor>

  <processor name="SITPlanarDigiProcessor" type="DDPlanarDigiProcessor">
    <parameter name="ForceHitsOntoSurface" type="bool">true </parameter>
    <parameter name="SubDetectorName" type="string"> SIT </parameter>
    <parameter name="IsStrip" type="bool"> false </parameter>
    <parameter name="ResolutionU" type="float">0.007 </parameter>
    <parameter name="ResolutionV" type="float">0.007 </parameter>
    <parameter name="SimTrackHitCollectionName" type="string" lcioInType="SimTrackerHit">SITCollection </parameter>
    <parameter name="SimTrkHitRelCollection" type="string" lcioOutType="LCRelation">SITTrackerHitRelations </parameter>
    <parameter name="TrackerHitCollectionName" type="string" lcioOutType="TrackerHitPlane">SITTrackerHits </parameter>
  </processor>

  <processor name="FTDPixelPlanarDigiProcessor" type="DDPlanarDigiProcessor">
    <parameter name="ForceHitsOntoSurface" type="bool">true </parameter>
    <parameter name="SubDetectorName" type="string"> FTD </parameter>
    <parameter name="IsStrip" type="bool">false </parameter>
    <parameter name="ResolutionU" type="float">0.003 </parameter>
    <parameter name="ResolutionV" type="float">0.003 </parameter>
    <parameter name="SimTrackHitCollectionName" type="string" lcioInType="SimTrackerHit"> FTD_PIXELCollection </parameter>
    <parameter name="SimTrkHitRelCollection" type="string" lcioOutType="LCRelation">FTDPixelTrackerHitRelations </parameter>
    <parameter name="TrackerHitCollectionName" type="string" lcioOutType="TrackerHitPlane">FTDPixelTrackerHits </parameter>
  </processor>

  <processor name="FTDStripPlanarDigiProcessor" type="DDPlanarDigiProcessor">
    <parameter name="ForceHitsOntoSurface" type="bool">true </parameter>
    <parameter name="SubDetectorName" type="string"> FTD </parameter>
    <parameter name="IsStrip" type="bool">true </parameter>
    <parameter name="ResolutionU" type="float">0.007 </parameter>
    <parameter name="ResolutionV" type="float">0.0 </parameter>
    <parameter name="SimTrackHitCollectionName" type="string" lcioInType="SimTrackerHit">FTD_STRIPCollection </parameter>
    <parameter name="SimTrkHitRelCollection" type="string" lcioOutType="LCRelation">FTDStripTrackerHitRelations </parameter>
    <parameter name="TrackerHitCollectionName" type="string" lcioOutType="TrackerHitPlane">FTDStripTrackerHits </parameter>
  </processor>

  <processor name="SETPlanarDigiProcessor" type="DDPlanarDigiProcessor">
    <parameter name="ForceHitsOntoSurface" type="bool">true </parameter>
    <parameter name="SubDetectorName" type="string"> SET </parameter>
    <parameter name="IsStrip" type="bool">true </parameter>
    <parameter name="ResolutionU" type="float">0.007 </parameter>
    <parameter name="ResolutionV" type="float">0 </parameter>
    <parameter name="SimTrackHitCollectionName" type="string" lcioInType="SimTrackerHit">SETCollection </parameter>
    <parameter name="SimTrkHitRelCollection" type="string" lcioOutType="LCRelation">SETTrackerHitRelations </parameter>
    <parameter name="TrackerHitCollectionName" type="string" lcioOutType="TrackerHitPlane">SETTrackerHits </parameter>
  </processor>

  <processor name="SETDDSpacePointBuilder" type="DDSpacePointBuilder">
    <parameter name="SubDetectorName" type="string"> SET </parameter>
    <parameter name="StripLength" type="Double"> 9.200000000e+01 </parameter>
    <parameter name="SimHitSpacePointRelCollection" type="string" lcioOutType="LCRelation"> SETSpacePointRelations </parameter>
    <parameter name="SpacePointsCollection" type="string" lcioOutType="TrackerHit"> SETSpacePoints </parameter>
    <parameter name="TrackerHitCollection" type="string" lcioInType="TrackerHitPlane"> SETTrackerHits </parameter>
    <parameter name="TrackerHitSimHitRelCollection" type="string" lcioInType="LCRelation"> SETTrackerHitRelations </parameter>
  </processor>

  <processor name="MyTPCDigiProcessor" type="DDTPCDigiProcessor">
    <parameter name="DiffusionCoeffRPhi" type="float">0.025 </parameter>
    <parameter name="DiffusionCoeffZ" type="float">0.08 </parameter>
    <parameter name="DoubleHitResolutionRPhi" type="float">2 </parameter>
    <parameter name="DoubleHitResolutionZ" type="float">5 </parameter>
    <parameter name="HitSortingBinningRPhi" type="float">2 </parameter>
    <parameter name="HitSortingBinningZ" type="float">5 </parameter>
    <parameter name="MaxClusterSizeForMerge" type="int">3 </parameter>
    <parameter name="N_eff" type="int">22 </parameter>
    <parameter name="PointResolutionPadPhi" type="float">0.9 </parameter>
    <parameter name="PointResolutionRPhi" type="float">0.05 </parameter>
    <parameter name="PointResolutionZ" type="float">0.4 </parameter>
    <parameter name="RejectCellID0" type="int">1 </parameter>
    <parameter name="TPCLowPtCollectionName" type="string" lcioInType="SimTrackerHit">TPCLowPtCollection </parameter>
    <parameter name="TPCPadRowHitCollectionName" type="string" lcioInType="SimTrackerHit">TPCCollection </parameter>
    <parameter name="TPCSpacePointCollectionName" type="string" lcioInType="SimTrackerHit">TPCSpacePointCollection </parameter>
    <parameter name="TPCTrackerHitsCol" type="string" lcioOutType="TrackerHit"> TPCTrackerHits </parameter>
    <parameter name="SimTrkHitRelCollection" type="string" lcioOutType="LCRelation">TPCTrackerHitRelations </parameter>
    <parameter name="TPCEndPlateModuleGapPhi" type="float"> 1. </parameter>
    <parameter name="TPCEndPlateModuleGapR" type="float">1. </parameter>
    <parameter name="TPCEndPlateModuleNumbers" type="IntVec">14 18 23 28 32 37 42 46  </parameter>
    <parameter name="TPCEndPlateModulePhi0s" type="FloatVec">
      0  0.17453292519943298  0.030350516853376176  0.2108457469509264  0.11998920441304516  0.1600004647682326  0.02051011203843622  0.062176216344090166
    </parameter>
  </processor>

  <processor name="MyClupatraProcessor" type="ClupatraProcessor">
    <parameter name="TrackSystemName" type="string">DDKalTest </parameter>
    <parameter name="Chi2Cut" type="float">100 </parameter>
    <parameter name="CreateDebugCollections" type="bool"> false true  </parameter>
    <parameter name="DistanceCut" type="float">40 </parameter>
    <parameter name="DuplicatePadRowFraction" type="float">0.1 </parameter>
    <parameter name="EnergyLossOn" type="bool"> true </parameter>
    <parameter name="MaxDeltaChi2" type="float">35 </parameter>
    <parameter name="MaxStepWithoutHit" type="int">6 </parameter>
    <parameter name="MinLayerFractionWithMultiplicity" type="float">0.5 </parameter>
    <parameter name="MinLayerNumberWithMultiplicity" type="int">3 </parameter>
    <parameter name="MinimumClusterSize" type="int">6 </parameter>
    <parameter name="MultipleScatteringOn" type="bool">false true </parameter>
    <parameter name="NumberOfZBins" type="int">150 </parameter>
    <parameter name="OutputCollection" type="string" lcioOutType="Track">ClupatraTracks </parameter>
    <parameter name="SegmentCollectionName" type="string" lcioOutType="Track">ClupatraTrackSegments </parameter>
    <parameter name="PadRowRange" type="int">15 </parameter>
    <parameter name="pickUpSiHits" type="bool">false </parameter>
    <parameter name="SITHitCollection" type="string">SITTrackerHits </parameter>
    <parameter name="VXDHitCollection" type="string">VXDTrackerHits </parameter>
    <parameter name="SmoothOn" type="bool">false </parameter>
    <parameter name="TPCHitCollection" type="string" lcioInType="TrackerHit">TPCTrackerHits </parameter>
    <parameter name="TrackEndsOuterCentralDist" type="float">25 </parameter>
    <parameter name="TrackEndsOuterForwardDist" type="float">40 </parameter>
    <parameter name="TrackIsCurlerOmega" type="float">0.001 </parameter>
    <parameter name="TrackStartsInnerDist" type="float">25 </parameter>
  </processor>

  <processor name="MySiliconTracking_MarlinTrk" type="SiliconTracking_MarlinTrk">
    <parameter name="TrackSystemName" type="string">DDKalTest </parameter>
    <parameter name="AngleCutForMerging" type="float">0.1 </parameter>
    <parameter name="CheckForDelta" type="int">1 </parameter>
    <parameter name="Chi2FitCut" type="float">120 </parameter>
    <parameter name="Chi2PrefitCut" type="float">1e+10 </parameter>
    <parameter name="Chi2WRphiQuartet" type="float">1 </parameter>
    <parameter name="Chi2WRphiSeptet" type="float">1 </parameter>
    <parameter name="Chi2WRphiTriplet" type="float">1 </parameter>
    <parameter name="Chi2WZQuartet" type="float">0.5 </parameter>
    <parameter name="Chi2WZSeptet" type="float">0.5 </parameter>
    <parameter name="Chi2WZTriplet" type="float">0.5 </parameter>
    <parameter name="CutOnD0" type="float">100 </parameter>
    <parameter name="CutOnPt" type="float">0.05 </parameter>
    <parameter name="CutOnZ0" type="float">100 </parameter>
    <parameter name="EnergyLossOn" type="bool"> true </parameter>
    <parameter name="FTDPixelHitCollectionName" type="string" lcioInType="TrackerHitPlane"> FTDPixelTrackerHits </parameter>
    <parameter name="FTDSpacePointCollection" type="string" lcioInType="TrackerHit"> FTDSpacePoints </parameter>
    <parameter name="FastAttachment" type="int">0 </parameter>
    <parameter name="InitialTrackErrorD0" type="float">1e+06 </parameter>
    <parameter name="InitialTrackErrorOmega" type="float">0.0001 </parameter>
    <parameter name="InitialTrackErrorPhi0" type="float">100 </parameter>
    <parameter name="InitialTrackErrorTanL" type="float">100 </parameter>
    <parameter name="InitialTrackErrorZ0" type="float">1e+06 </parameter>
    <parameter name="LayerCombinations" type="IntVec"> 
      8 6 5  8 6 4  8 6 3  8 6 2
      8 5 3  8 5 2  8 4 3  8 4 2  
      6 5 3  6 5 2  6 4 3  6 4 2 
      6 3 1  6 3 0  6 2 1  6 2 0 
      5 3 1  5 3 0  5 2 1  5 2 0
      4 3 1  4 3 0  4 2 1  4 2 0    
    </parameter>
    <parameter name="LayerCombinationsFTD" type="IntVec"> 
      13 11  9    13 11 8    13 10 9    13 10 8
      12 11  9    12 11 8    12 10 9    12 10 8
      11  9  7    11  9 6    11  8 7    11  8 6 
      10  9  7    10  9 6    10  8 7    10  8 6
      9  7  5     9  7 4     9  6 5     9  6 4
      8  7  5     8  7 4     8  6 5     8  6 4
      7  5  3     7  5 2     7  4 3     7  4 2
      6  5  3     6  5 2     6  4 3     6  4 2
      5  3  1     5  3 0     5  2 1     5  2 0
      4  3  1     4  3 0     4  2 1     4  2 0
    </parameter>
    <parameter name="MaxChi2PerHit" type="double">100 </parameter>
    <parameter name="MaxHitsPerSector" type="int">100 </parameter>
    <parameter name="MinDistCutAttach" type="float">2.5 </parameter>
    <parameter name="MinDistToDelta" type="float">0.25 </parameter>
    <parameter name="MinLayerToAttach" type="int">-1 </parameter>
    <parameter name="MinimalHits" type="int">3 </parameter>
    <parameter name="MultipleScatteringOn" type="bool"> true </parameter>
    <parameter name="NDivisionsInPhi" type="int"> 80 </parameter>
    <parameter name="NDivisionsInPhiFTD" type="int"> 30 </parameter>
    <parameter name="NDivisionsInTheta" type="int"> 80 </parameter>
    <parameter name="NHitsChi2" type="int">5 </parameter>
    <parameter name="RunMarlinTrkDiagnostics" type="bool">false </parameter>
    <parameter name="SITHitCollectionName" type="string" lcioInType="TrackerHit"> SITTrackerHits</parameter>
    <parameter name="SiTrackCollectionName" type="string" lcioOutType="Track">SiTracks </parameter>
    <parameter name="SmoothOn" type="bool"> false </parameter>
    <parameter name="UseSIT" type="int">1 </parameter>
    <parameter name="UseEventDisplay" type="bool"> false </parameter>
    <parameter name="VTXHitCollectionName" type="string" lcioInType="TrackerHitPlane">VXDTrackerHits </parameter>
  </processor>

  <processor name="MyTrackSubsetProcessor" type="TrackSubsetProcessor">
    <parameter name="RemoveShortTracks" type="bool">true </parameter>
    <parameter name="TrackSystemName" type="string">DDKalTest </parameter>
    <parameter name="EnergyLossOn" type="bool">true </parameter>
    <parameter name="MultipleScatteringOn" type="bool">true </parameter>
    <parameter name="Omega" type="double">0.75 </parameter>
    <parameter name="SmoothOn" type="bool">false </parameter>
    <parameter name="TrackInputCollections" type="StringVec">ForwardTracks SiTracks  </parameter>
    <parameter name="TrackOutputCollection" type="string" lcioOutType="Track">SubsetTracks </parameter>
  </processor>

  <processor name="MyFullLDCTracking_MarlinTrk" type="FullLDCTracking_MarlinTrk">
    <parameter name="TrackSystemName" type="string">DDKalTest </parameter>
    <parameter name="AngleCutForForcedMerging" type="float">0.05 </parameter>
    <parameter name="AngleCutForMerging" type="float">0.1 </parameter>
    <parameter name="AssignETDHits" type="int">0 </parameter>
    <parameter name="AssignFTDHits" type="int">1 </parameter>
    <parameter name="AssignSETHits" type="int"> 1 </parameter>
    <parameter name="AssignSITHits" type="int">1 </parameter>
    <parameter name="AssignTPCHits" type="int">0 </parameter>
    <parameter name="AssignVTXHits" type="int">1 </parameter>
    <parameter name="Chi2FitCut" type="float">100 </parameter>
    <parameter name="CutOnSiHits" type="int">4 </parameter>
    <parameter name="CutOnTPCHits" type="int">10 </parameter>
    <parameter name="CutOnTrackD0" type="float">500 </parameter>
    <parameter name="CutOnTrackZ0" type="float">500 </parameter>
    <parameter name="D0CutForForcedMerging" type="float">50 </parameter>
    <parameter name="D0CutForMerging" type="float">500 </parameter>
    <parameter name="D0CutToMergeTPCSegments" type="float">100 </parameter>
    <parameter name="Debug" type="int">0 </parameter>
    <parameter name="DeltaPCutToMergeTPCSegments" type="float">0.1 </parameter>
    <parameter name="EnergyLossOn" type="bool"> true </parameter>
    <parameter name="FTDHitToTrackDistance" type="float">2 </parameter>
    <parameter name="FTDPixelHitCollectionName" type="string" lcioInType="TrackerHitPlane"> FTDPixelTrackerHits </parameter>
    <parameter name="FTDSpacePointCollection" type="string" lcioInType="TrackerHit"> FTDSpacePoints </parameter>
    <parameter name="ForbidOverlapInZComb" type="int">0 </parameter>
    <parameter name="ForbidOverlapInZTPC" type="int">0 </parameter>
    <parameter name="ForceSiTPCMerging" type="int">0 </parameter>
    <parameter name="ForceTPCSegmentsMerging" type="int"> 0 </parameter>
    <parameter name="InitialTrackErrorD0" type="float">1e+06 </parameter>
    <parameter name="InitialTrackErrorOmega" type="float"> 0.00001 </parameter>
    <parameter name="InitialTrackErrorPhi0" type="float">100 </parameter>
    <parameter name="InitialTrackErrorTanL" type="float">100 </parameter>
    <parameter name="InitialTrackErrorZ0" type="float">1e+06 </parameter>
    <parameter name="LDCTrackCollection" type="string" lcioOutType="Track">MarlinTrkTracks </parameter>
    <parameter name="MaxChi2PerHit" type="double"> 200 </parameter>
    <parameter name="MultipleScatteringOn" type="bool"> true </parameter>
    <parameter name="NHitsExtrapolation" type="int">35 </parameter>
    <parameter name="OmegaCutForForcedMerging" type="float">0.15 </parameter>
    <parameter name="OmegaCutForMerging" type="float">0.25 </parameter>
    <parameter name="PtCutToMergeTPCSegments" type="float">1.2 </parameter>
    <parameter name="RunMarlinTrkDiagnostics" type="bool">false </parameter>
    <parameter name="SETHitCollection" type="string" lcioInType="TrackerHit">SETSpacePoints </parameter>
    <parameter name="SETHitToTrackDistance" type="float">50 </parameter>
    <parameter name="SITHitCollection" type="string" lcioInType="TrackerHit"> SITTrackerHits </parameter>
    <parameter name="SITHitToTrackDistance" type="float">2 </parameter>
    <parameter name="SiTracks" type="string" lcioInType="Track">SubsetTracks </parameter>
    <parameter name="SiTracksMCPRelColl" type="string" lcioInType="LCRelation">SubsetTracksMCTruthLink </parameter>
    <parameter name="SmoothOn" type="bool">true </parameter>
    <parameter name="TPCHitCollection" type="string" lcioInType="TrackerHit">TPCTrackerHits </parameter>
    <parameter name="TPCHitToTrackDistance" type="float">15 </parameter>
    <parameter name="TPCTracks" type="string" lcioInType="Track">ClupatraTracks </parameter>
    <parameter name="TPCTracksMCPRelColl" type="string" lcioInType="LCRelation">TPCTracksMCTruthLink </parameter>
    <parameter name="VTXHitCollection" type="string" lcioInType="TrackerHit">VXDTrackerHits </parameter>
    <parameter name="VTXHitToTrackDistance" type="float">1.5 </parameter>
    <parameter name="Z0CutForForcedMerging" type="float">200 </parameter>
    <parameter name="Z0CutForMerging" type="float">1000 </parameter>
    <parameter name="Z0CutToMergeTPCSegments" type="float">5000 </parameter>
    <parameter name="cosThetaCutHighPtMerge" type="float">0.99 </parameter>
    <parameter name="cosThetaCutSoftHighPtMerge" type="float">0.998 </parameter>
    <parameter name="hitDistanceCutHighPtMerge" type="float">25 </parameter>
    <parameter name="maxFractionOfOutliersCutHighPtMerge" type="float">0.95 </parameter>
    <parameter name="maxHitDistanceCutHighPtMerge" type="float">50 </parameter>
    <parameter name="momDiffCutHighPtMerge" type="float">0.01 </parameter>
    <parameter name="momDiffCutSoftHighPtMerge" type="float">0.25 </parameter>
  </processor>

  <processor name="MyCompute_dEdxProcessor" type="Compute_dEdxProcessor">
    <parameter name="EnergyLossErrorTPC" type="float">0.05 </parameter>
    <parameter name="LDCTrackCollection" type="string"> MarlinTrkTracks </parameter>
  </processor>

  <processor name="MyForwardTracking" type="ForwardTracking">
    <parameter name="TrackSystemName" type="string">DDKalTest </parameter>
    <parameter name="ForwardTrackCollection" type="string" lcioOutType="Track">ForwardTracks </parameter>
    <parameter name="EnergyLossOn" type="bool">true </parameter>
    <parameter name="FTDHitCollections" type="StringVec">FTDPixelTrackerHits FTDSpacePoints</parameter>
    <parameter name="MultipleScatteringOn" type="bool">true </parameter>
    <parameter name="SmoothOn" type="bool">false </parameter>
    <parameter name="Chi2ProbCut" type="double">0.0 </parameter>
    <parameter name="HelixFitMax" type="double">500 </parameter>
    <parameter name="OverlappingHitsDistMax" type="double">3.5 </parameter>
    <parameter name="HitsPerTrackMin" type="int">3 </parameter>
    <parameter name="BestSubsetFinder" type="string">SubsetSimple </parameter>
    <parameter name="TakeBestVersionOfTrack" type="bool">true </parameter>
    <parameter name="MaxConnectionsAutomaton" type="int">100000 </parameter>
    <parameter name="MaxHitsPerSector" type="int">1000 </parameter>
    <parameter name="Crit2_DeltaPhi_min" type="float">0 0</parameter>
    <parameter name="Crit2_DeltaPhi_max" type="float">30 0.8</parameter>
    <parameter name="Crit2_DeltaRho_min" type="float">20</parameter>
    <parameter name="Crit2_DeltaRho_max" type="float">150</parameter>
    <parameter name="Crit2_RZRatio_min" type="float">1.002</parameter>
    <parameter name="Crit2_RZRatio_max" type="float">1.08</parameter>
    <parameter name="Crit2_StraightTrackRatio_min" type="float">0.9 0.99</parameter>
    <parameter name="Crit2_StraightTrackRatio_max" type="float">1.02 1.01</parameter>
    <parameter name="Crit3_3DAngle_min" type="float">0 0</parameter>
    <parameter name="Crit3_3DAngle_max" type="float">10 0.35</parameter>
    <parameter name="Crit3_ChangeRZRatio_min" type="float">0.995 0.999</parameter>
    <parameter name="Crit3_ChangeRZRatio_max" type="float">1.015 1.001</parameter>
    <parameter name="Crit3_IPCircleDist_min" type="float">0 0</parameter>
    <parameter name="Crit3_IPCircleDist_max" type="float">20 1.5</parameter>
    <parameter name="Crit3_PT_min" type="float">0.1</parameter>
    <parameter name="Crit3_PT_max" type="float">99999999</parameter>
    <parameter name="Crit4_3DAngleChange_min" type="float">0.8 0.99</parameter>
    <parameter name="Crit4_3DAngleChange_max" type="float">1.3 1.01</parameter>
    <parameter name="Crit4_DistToExtrapolation_min" type="float">0 0</parameter>
    <parameter name="Crit4_DistToExtrapolation_max" type="float">1.0 0.05</parameter>
    <parameter name="Criteria" type="StringVec">
      Crit2_DeltaPhi
      Crit2_DeltaRho
      Crit2_RZRatio
      Crit2_StraightTrackRatio
      
      Crit3_3DAngle
      Crit3_ChangeRZRatio
      Crit3_IPCircleDist
      Crit3_PT
      
      Crit4_DistToExtrapolation
      Crit4_3DAngleChange
    </parameter>
  </processor> 

  <processor name="MyKinkFinder" type="KinkFinder">
    <parameter name="DebugPrinting" type="int"> 0</parameter>
    <parameter name="TrackCollection" type="string"> MarlinTrkTracks</parameter>
  </processor>

  <processor name="MyV0Finder" type="V0Finder">
    <parameter name="TrackCollection" type="string"> MarlinTrkTracks</parameter>
    <parameter name="MassRangeGamma"  type="float">  0.01 </parameter>
    <parameter name="MassRangeK0S"    type="float">  0.02 </parameter>
    <parameter name="MassRangeL0"     type="float">  0.02 </parameter>
  </processor>


<group>
    <parameter name="inputHitCollections"> EcalBarrelCollection </parameter>
    <parameter name="outputHitCollections"> EcalBarrelCollectionDigi </parameter>
    <parameter name="outputRelationCollections"> EcalBarrelRelationsSimDigi </parameter>
    <parameter name="threshold"> 0.5 </parameter>
    <parameter name="timingCut"> 1  </parameter>
    <parameter name="CellIDLayerString"> layer </parameter>

  <processor name="MyEcalBarrelDigi_ILD_l4_v02" type="RealisticCaloDigiSilicon">
    <parameter name="calibration_mip">0.0001575</parameter>
  </processor>
  <processor name="MyEcalBarrelDigi_ILD_s4_v02" type="RealisticCaloDigiSilicon">
    <parameter name="calibration_mip">0.0001575</parameter>
  </processor>
</group>


<group>
    <parameter name="inputHitCollections"> EcalBarrelCollectionDigi </parameter>
    <parameter name="inputRelationCollections"> EcalBarrelRelationsSimDigi </parameter>
    <parameter name="outputHitCollections"> EcalBarrelCollectionRec </parameter>
    <parameter name="outputRelationCollections"> EcalBarrelRelationsSimRec </parameter>
    <parameter name="calibration_layergroups"> 20 11 </parameter>
    <parameter name="CellIDLayerString"> layer </parameter>

  <processor name="MyEcalBarrelReco_ILD_l4_v02" type="RealisticCaloRecoSilicon">
    <parameter name="calibration_factorsMipGev">0.00648596690341 0.0131746235626</parameter>
  </processor>
  <processor name="MyEcalBarrelReco_ILD_s4_v02" type="RealisticCaloRecoSilicon">
    <parameter name="calibration_factorsMipGev">0.00648596690341 0.0131746235626</parameter>
  </processor>
</group>

  <processor name="MyEcalBarrelGapFiller" type="BruteForceEcalGapFiller">
    <parameter name="inputHitCollection"> EcalBarrelCollectionRec </parameter>
    <parameter name="outputHitCollection"> EcalBarrelCollectionGapHits </parameter>
    <parameter name="CellIDLayerString"> layer </parameter>
    <parameter name="CellIDModuleString"> module </parameter>
    <parameter name="CellIDStaveString"> stave </parameter>
    <parameter name="expectedInterModuleDistance"> 7.0 </parameter>
  </processor>

<group>
    <parameter name="inputHitCollections"> EcalEndcapsCollection </parameter>
    <parameter name="outputHitCollections"> EcalEndcapsCollectionDigi </parameter>
    <parameter name="outputRelationCollections"> EcalEndcapsRelationsSimDigi </parameter>
    <parameter name="threshold"> 0.5 </parameter>
    <parameter name="timingCut"> 1  </parameter>
    <parameter name="CellIDLayerString"> layer </parameter>
  <processor name="MyEcalEndcapDigi_ILD_l4_v02" type="RealisticCaloDigiSilicon">
    <parameter name="calibration_mip">0.0001575</parameter>
  </processor>
  <processor name="MyEcalEndcapDigi_ILD_s4_v02" type="RealisticCaloDigiSilicon">
    <parameter name="calibration_mip">0.0001575</parameter>
  </processor>
</group>

<group>
    <parameter name="inputHitCollections"> EcalEndcapsCollectionDigi </parameter>
    <parameter name="inputRelationCollections"> EcalEndcapsRelationsSimDigi </parameter>
    <parameter name="outputHitCollections"> EcalEndcapsCollectionRec </parameter>
    <parameter name="outputRelationCollections"> EcalEndcapsRelationsSimRec </parameter>
    <parameter name="calibration_layergroups"> 20 11 </parameter>
    <parameter name="CellIDLayerString"> layer </parameter>
  <processor name="MyEcalEndcapReco_ILD_l4_v02" type="RealisticCaloRecoSilicon">
    <parameter name="calibration_factorsMipGev">0.00677453657324 0.0137607808509</parameter>
  </processor>
  <processor name="MyEcalEndcapReco_ILD_s4_v02" type="RealisticCaloRecoSilicon">
    <parameter name="calibration_factorsMipGev">0.00677453657324 0.0137607808509</parameter>
  </processor>
</group>

  <processor name="MyEcalEndcapGapFiller" type="BruteForceEcalGapFiller">
    <parameter name="inputHitCollection"> EcalEndcapsCollectionRec </parameter>
    <parameter name="outputHitCollection"> EcalEndcapsCollectionGapHits </parameter>
    <parameter name="CellIDLayerString"> layer </parameter>
    <parameter name="CellIDModuleString"> module </parameter>
    <parameter name="CellIDStaveString"> stave </parameter>
    <parameter name="expectedInterModuleDistance"> 7.0 </parameter>
  </processor>

<group>
    <parameter name="inputHitCollections"> EcalEndcapRingCollection </parameter>
    <parameter name="outputHitCollections"> EcalEndcapRingCollectionDigi </parameter>
    <parameter name="outputRelationCollections"> EcalEndcapRingRelationsSimDigi </parameter>
    <parameter name="threshold"> 0.5 </parameter>
    <parameter name="timingCut"> 1  </parameter>
    <parameter name="CellIDLayerString"> layer </parameter>
  <processor name="MyEcalRingDigi_ILD_l4_v02" type="RealisticCaloDigiSilicon">
    <parameter name="calibration_mip">0.0001575</parameter>
  </processor>
  <processor name="MyEcalRingDigi_ILD_s4_v02" type="RealisticCaloDigiSilicon">
    <parameter name="calibration_mip">0.0001575</parameter>
  </processor>
</group>

<group>
    <parameter name="inputHitCollections"> EcalEndcapRingCollectionDigi </parameter>
    <parameter name="inputRelationCollections"> EcalEndcapRingRelationsSimDigi </parameter>
    <parameter name="outputHitCollections"> EcalEndcapRingCollectionRec </parameter>
    <parameter name="outputRelationCollections"> EcalEndcapRingRelationsSimRec </parameter>
    <parameter name="calibration_layergroups"> 20 11 </parameter>
    <parameter name="CellIDLayerString"> layer </parameter>
  <processor name="MyEcalRingReco_ILD_l4_v02" type="RealisticCaloRecoSilicon">
    <parameter name="calibration_factorsMipGev">0.00600726928777 0.012202268788</parameter>
  </processor>
  <processor name="MyEcalRingReco_ILD_s4_v02" type="RealisticCaloRecoSilicon">
    <parameter name="calibration_factorsMipGev">0.00600726928777 0.012202268788</parameter>
  </processor>
</group>

<group>
    <parameter name="inputHitCollections"> HcalBarrelRegCollection </parameter>
    <parameter name="outputHitCollections"> HcalBarrelCollectionDigi </parameter>
    <parameter name="outputRelationCollections"> HcalBarrelRelationsSimDigi </parameter>
    <parameter name="threshold"> 0.5 </parameter>
    <parameter name="thresholdUnit"> MIP </parameter>
    <parameter name="timingCut"> 1  </parameter>
    <parameter name="ppd_mipPe"> 15 </parameter>
    <parameter name="ppd_npix"> 2000 </parameter>
    <parameter name="ppd_npix_uncert"> 0 </parameter>
    <parameter name="ppd_pix_spread"> 0 </parameter>
    <parameter name="CellIDLayerString"> layer </parameter>
  <processor name="MyHcalBarrelDigi_ILD_l4_v02" type="RealisticCaloDigiScinPpd">
    <parameter name="calibration_mip">0.0004925</parameter>
  </processor>
  <processor name="MyHcalBarrelDigi_ILD_s4_v02" type="RealisticCaloDigiScinPpd">
    <parameter name="calibration_mip">0.0004925</parameter>
  </processor>
</group>

<group>
    <parameter name="inputHitCollections"> HcalBarrelCollectionDigi </parameter>
    <parameter name="inputRelationCollections"> HcalBarrelRelationsSimDigi </parameter>
    <parameter name="outputHitCollections"> HcalBarrelCollectionRec </parameter>
    <parameter name="outputRelationCollections"> HcalBarrelRelationsSimRec </parameter>
    <parameter name="ppd_mipPe"> 15 </parameter> 
    <parameter name="ppd_npix"> 2000 </parameter> 
    <parameter name="calibration_layergroups"> 100 </parameter>
    <parameter name="CellIDLayerString"> layer </parameter>
  <processor name="MyHcalBarrelReco_ILD_l4_v02" type="RealisticCaloRecoScinPpd">
    <parameter name="calibration_factorsMipGev">0.0282939686687</parameter>
  </processor>
  <processor name="MyHcalBarrelReco_ILD_s4_v02" type="RealisticCaloRecoScinPpd">
    <parameter name="calibration_factorsMipGev">0.0282939686687</parameter>
  </processor>
</group>

<group>
    <parameter name="inputHitCollections"> HcalEndcapsCollection </parameter>
    <parameter name="outputHitCollections"> HcalEndcapsCollectionDigi </parameter>
    <parameter name="outputRelationCollections"> HcalEndcapsRelationsSimDigi </parameter>
    <parameter name="threshold"> 0.5 </parameter>
    <parameter name="thresholdUnit"> MIP </parameter>
    <parameter name="timingCut"> 1  </parameter>
    <parameter name="ppd_mipPe"> 15 </parameter>
    <parameter name="ppd_npix"> 2000 </parameter>
    <parameter name="ppd_npix_uncert"> 0 </parameter>
    <parameter name="ppd_pix_spread"> 0 </parameter>
    <parameter name="CellIDLayerString"> layer </parameter>
  <processor name="MyHcalEndcapDigi_ILD_l4_v02" type="RealisticCaloDigiScinPpd">
    <parameter name="calibration_mip">0.0004725</parameter>
  </processor>
  <processor name="MyHcalEndcapDigi_ILD_s4_v02" type="RealisticCaloDigiScinPpd">
    <parameter name="calibration_mip">0.0004725</parameter>
  </processor>
</group>

<group>
    <parameter name="inputHitCollections"> HcalEndcapsCollectionDigi </parameter>
    <parameter name="inputRelationCollections"> HcalEndcapsRelationsSimDigi </parameter>
    <parameter name="outputHitCollections"> HcalEndcapsCollectionRec </parameter>
    <parameter name="outputRelationCollections"> HcalEndcapsRelationsSimRec </parameter>
    <parameter name="ppd_mipPe"> 15 </parameter> 
    <parameter name="ppd_npix"> 2000 </parameter> 
    <parameter name="calibration_layergroups"> 100 </parameter>
    <parameter name="CellIDLayerString"> layer </parameter>
  <processor name="MyHcalEndcapReco_ILD_l4_v02" type="RealisticCaloRecoScinPpd">
    <parameter name="calibration_factorsMipGev">0.0300448694145</parameter>
  </processor>
  <processor name="MyHcalEndcapReco_ILD_s4_v02" type="RealisticCaloRecoScinPpd">
    <parameter name="calibration_factorsMipGev">0.0300448694145</parameter>
  </processor>
</group>

<group>
    <parameter name="inputHitCollections"> HcalEndcapRingCollection </parameter>
    <parameter name="outputHitCollections"> HcalEndcapRingCollectionDigi </parameter>
    <parameter name="outputRelationCollections"> HcalEndcapRingRelationsSimDigi </parameter>
    <parameter name="threshold"> 0.5 </parameter>
    <parameter name="thresholdUnit"> MIP </parameter>
    <parameter name="timingCut"> 1  </parameter>
    <parameter name="ppd_mipPe"> 15 </parameter>
    <parameter name="ppd_npix"> 2000 </parameter>
    <parameter name="ppd_npix_uncert"> 0 </parameter>
    <parameter name="ppd_pix_spread"> 0 </parameter>
    <parameter name="CellIDLayerString"> layer </parameter>
  <processor name="MyHcalRingDigi_ILD_l4_v02" type="RealisticCaloDigiScinPpd">
    <parameter name="calibration_mip">0.0004875</parameter>
  </processor>
  <processor name="MyHcalRingDigi_ILD_s4_v02" type="RealisticCaloDigiScinPpd">
    <parameter name="calibration_mip">0.0004875</parameter>
  </processor>
</group>

<group>
    <parameter name="inputHitCollections"> HcalEndcapRingCollectionDigi </parameter>
    <parameter name="inputRelationCollections"> HcalEndcapRingRelationsSimDigi </parameter>
    <parameter name="outputHitCollections"> HcalEndcapRingCollectionRec </parameter>
    <parameter name="outputRelationCollections"> HcalEndcapRingRelationsSimRec </parameter>
    <parameter name="ppd_mipPe"> 15 </parameter> 
    <parameter name="ppd_npix"> 2000 </parameter> 
    <parameter name="calibration_layergroups"> 100 </parameter>
    <parameter name="CellIDLayerString"> layer </parameter>
  <processor name="MyHcalRingReco_ILD_l4_v02" type="RealisticCaloRecoScinPpd">
    <parameter name="calibration_factorsMipGev">0.0359436163529</parameter>
  </processor>
  <processor name="MyHcalRingReco_ILD_s4_v02" type="RealisticCaloRecoScinPpd">
    <parameter name="calibration_factorsMipGev">0.0359436163529</parameter>
  </processor>
</group>

  <processor name="MySimpleBCalDigi" type="SimpleFCalDigi">
    <parameter name="CaloID" type="string">bcal </parameter>
    <parameter name="CellIDLayerString" type="string"> layer </parameter>
    <parameter name="CalibrFCAL" type="FloatVec">1.</parameter>
    <parameter name="FCALCollections" type="StringVec">BeamCalCollection</parameter>
    <parameter name="FCALOutputCollection" type="string">BCAL</parameter>
    <parameter name="FcalThreshold" type="float">1e-06 </parameter>
    <parameter name="RelationOutputCollection" type="string">RelationBCalHit </parameter>
  </processor>

  <processor name="MySimpleLCalDigi" type="SimpleFCalDigi">
    <parameter name="CaloID" type="string">lcal </parameter>
    <parameter name="CellIDLayerString" type="string"> layer </parameter>
    <parameter name="CalibrFCAL" type="FloatVec">89.0</parameter>
    <parameter name="FCALCollections" type="StringVec"> LumiCalCollection  </parameter>
    <parameter name="FCALOutputCollection" type="string">LCAL </parameter>
    <parameter name="FcalThreshold" type="float">0e-04 </parameter>
    <parameter name="RelationOutputCollection" type="string">RelationLcalHit </parameter>
  </processor>
  
  <processor name="MySimpleLHCalDigi" type="SimpleFCalDigi">
    <parameter name="CaloID" type="string">lhcal </parameter>
    <parameter name="CellIDLayerString" type="string"> layer </parameter>
    <parameter name="CalibrFCAL" type="FloatVec">150</parameter>
    <parameter name="FCALCollections" type="StringVec"> LHCalCollection</parameter>
    <parameter name="FCALOutputCollection" type="string">LHCAL </parameter>
    <parameter name="FcalThreshold" type="float">1e-06 </parameter>
    <parameter name="RelationOutputCollection" type="string">RelationLHcalHit </parameter>
  </processor>

  <processor name="MySimpleMuonDigi" type="SimpleMuonDigi">
    <parameter name="CellIDLayerString" type="string"> layer </parameter>
    <parameter name="CalibrMUON" type="FloatVec">56.7</parameter>
    <parameter name="MaxHitEnergyMUON" type="float">2.0</parameter>
    <parameter name="MUONCollections" type="StringVec">
      YokeBarrelCollection YokeEndcapsCollection</parameter>
    <parameter name="MUONOutputCollection" type="string">MUON </parameter>
    <parameter name="MUONThreshold" type="float">1e-06 </parameter>
    <parameter name="RelationOutputCollection" type="string">RelationMuonHit </parameter>
  </processor>

<group>
    <parameter name="MaxBarrelTrackerInnerRDistance" type="float">105.0 </parameter>
    <parameter name="PandoraSettingsXmlFile" type="String"> PandoraSettingsDefault.xml </parameter>
    <parameter name="TrackCollections" type="StringVec">MarlinTrkTracks</parameter>
    <parameter name="ECalCaloHitCollections" type="StringVec">EcalBarrelCollectionRec EcalBarrelCollectionGapHits EcalEndcapsCollectionRec EcalEndcapsCollectionGapHits EcalEndcapRingCollectionRec</parameter>
    <parameter name="HCalCaloHitCollections" type="StringVec">HcalBarrelCollectionRec HcalEndcapsCollectionRec HcalEndcapRingCollectionRec</parameter>
    <parameter name="LCalCaloHitCollections" type="StringVec">LCAL</parameter>
    <parameter name="LHCalCaloHitCollections" type="StringVec">LHCAL</parameter>
    <parameter name="MuonCaloHitCollections" type="StringVec">MUON</parameter>
    <parameter name="MCParticleCollections" type="StringVec">MCParticle</parameter>
    <parameter name="RelCaloHitCollections" type="StringVec">EcalBarrelRelationsSimRec EcalEndcapsRelationsSimRec EcalEndcapRingRelationsSimRec HcalBarrelRelationsSimRec HcalEndcapsRelationsSimRec HcalEndcapRingRelationsSimRec RelationMuonHit</parameter>
    <parameter name="RelTrackCollections" type="StringVec">MarlinTrkTracksMCP</parameter>
    <parameter name="KinkVertexCollections" type="StringVec">KinkVertices</parameter>
    <parameter name="ProngVertexCollections" type="StringVec">ProngVertices</parameter>
    <parameter name="SplitVertexCollections" type="StringVec">SplitVertices</parameter>
    <parameter name="V0VertexCollections" type="StringVec">V0Vertices</parameter>
    <parameter name="ClusterCollectionName" type="String">PandoraClusters</parameter>
    <parameter name="PFOCollectionName" type="String">PandoraPFOs</parameter>
    <parameter name="ECalMipThreshold" type="float">0.5</parameter>
    <parameter name="HCalMipThreshold" type="float">0.3</parameter>
    <parameter name="DigitalMuonHits" type="int">0</parameter>
    <parameter name="MaxHCalHitHadronicEnergy" type="float">1000000.</parameter> 
    <parameter name="MaxHCalHitHadronicEnergy" type="float">1000000.</parameter>
    <parameter name="UseOldTrackStateCalculation" type="int"> 0 1  </parameter> <!-- !!!FIXME, workaround for some missing TS AtCalo face - this should really be: 0 -->
    <parameter name="NEventsToSkip" type="int">0</parameter>
    <parameter name="VertexBarrelDetectorName" type="string">VXD </parameter>
    <parameter name="TrackerBarrelDetectorNames" type="StringVec">TPC</parameter>
    <parameter name="TrackerEndcapDetectorNames" type="StringVec">FTD</parameter>
    <parameter name="CoilName" type="string">Coil</parameter>
    <parameter name="ECalBarrelDetectorName" type="string">EcalBarrel </parameter>
    <parameter name="ECalEndcapDetectorName" type="string">EcalEndcap </parameter>
    <parameter name="ECalOtherDetectorNames" type="StringVec">EcalPlug Lcal BeamCal  </parameter>
    <parameter name="HCalEndcapDetectorName" type="string">HcalEndcap </parameter>
    <parameter name="HCalBarrelDetectorName" type="string">HcalBarrel </parameter>
    <parameter name="HCalOtherDetectorNames" type="StringVec">HcalRing LHcal </parameter>
    <parameter name="MuonBarrelDetectorName" type="string">YokeBarrel </parameter>
    <parameter name="MuonEndcapDetectorName" type="string">YokeEndcap </parameter>
    <parameter name="MuonOtherDetectorNames" type="StringVec"></parameter>
    <parameter name="CreateGaps" type="bool">false</parameter>
    <parameter name="TrackCreatorName" type="string">DDTrackCreatorILD </parameter>
  <processor name="MyDDMarlinPandora_ILD_l4_v02" type="DDPandoraPFANewProcessor">
    <parameter name="ECalToMipCalibration">149.254</parameter>
    <parameter name="HCalToMipCalibration">35.3357</parameter>
    <parameter name="MuonToMipCalibration">10.3093</parameter>
    <parameter name="ECalToEMGeVCalibration">1.0</parameter>
    <parameter name="HCalToEMGeVCalibration">1.0</parameter>
    <parameter name="ECalToHadGeVCalibrationBarrel">1.20700253651</parameter>
    <parameter name="ECalToHadGeVCalibrationEndCap">1.20700253651</parameter>
    <parameter name="HCalToHadGeVCalibration">1.02821419758</parameter>
  </processor>
  <processor name="MyDDMarlinPandora_ILD_s4_v02" type="DDPandoraPFANewProcessor">
    <parameter name="ECalToMipCalibration">149.254</parameter>
    <parameter name="HCalToMipCalibration">35.3357</parameter>
    <parameter name="MuonToMipCalibration">10.3093</parameter>
    <parameter name="ECalToEMGeVCalibration">1.0</parameter>
    <parameter name="HCalToEMGeVCalibration">1.0</parameter>
    <parameter name="ECalToHadGeVCalibrationBarrel">1.20700253651</parameter>
    <parameter name="ECalToHadGeVCalibrationEndCap">1.20700253651</parameter>
    <parameter name="HCalToHadGeVCalibration">1.02821419758</parameter>
  </processor>
</group>

  <processor name="MyRecoMCTruthLinker" type="RecoMCTruthLinker">
    <parameter name="MCParticleCollection" type="string" lcioInType="MCParticle"> MCParticle </parameter>
    <parameter name="RecoParticleCollection" type="string" lcioInType="ReconstructedParticle"> PandoraPFOs </parameter>
    <parameter name="ClusterCollection" type="string" lcioInType="Cluster"> PandoraClusters </parameter>
    <parameter name="TrackCollection" type="string" lcioInType="Track">MarlinTrkTracks </parameter>
    <parameter name="SimTrackerHitCollections" type="StringVec" lcioInType="SimTrackerHit">
      VXDCollection 
      SITCollection 
      FTD_PIXELCollection 
      FTD_STRIPCollection 
      TPCCollection 
      SETCollection  
    </parameter>
    <parameter name="TrackerHitsRelInputCollections" type="StringVec" lcioInType="LCRelation">
      VXDTrackerHitRelations 
      SITTrackerHitRelations
      FTDPixelTrackerHitRelations 
      FTDSpacePointRelations 
      TPCTrackerHitRelations 
      SETSpacePointRelations  
    </parameter>
    <parameter name="SimCaloHitCollections" type="StringVec" lcioInType="SimCalorimeterHit">
      BeamCalCollection
      EcalBarrelCollection
      EcalEndcapsCollection
      EcalEndcapRingCollection
      HcalBarrelRegCollection
      HcalEndcapsCollection
      HcalEndcapRingCollection
      LHCalCollection
      LumiCalCollection
      YokeBarrelCollection
      YokeEndcapsCollection
    </parameter> 
    <parameter name="SimCalorimeterHitRelationNames" type="StringVec" lcioInType="LCRelation">
      RelationCaloHit
      RelationLHcalHit
      RelationMuonHit
      RelationLcalHit
      RelationBCalHit
    </parameter> 
    <parameter name="KeepDaughtersPDG" type="IntVec"> 22 111 310 13 211 321</parameter>
    <parameter name="MCParticlesSkimmedName" type="string" lcioOutType="MCParticle"> MCParticlesSkimmed </parameter>
    <parameter name="MCTruthTrackLinkName" type="string" lcioOutType="LCRelation"> MCTruthMarlinTrkTracksLink </parameter>  
    <parameter name="TrackMCTruthLinkName" type="string" lcioOutType="LCRelation"> MarlinTrkTracksMCTruthLink </parameter>
    <parameter name="MCTruthClusterLinkName" type="string" lcioOutType="LCRelation"> MCTruthClusterLink </parameter>
    <parameter name="ClusterMCTruthLinkName" type="string" lcioOutType="LCRelation"> ClusterMCTruthLink </parameter>
    <parameter name="RecoMCTruthLinkName" type="string" lcioOutType="LCRelation"> RecoMCTruthLink </parameter>
    <parameter name="MCTruthRecoLinkName" type="string" lcioOutType="LCRelation"> MCTruthRecoLink </parameter>
    <parameter name="FullRecoRelation" type="bool"> true </parameter>
    <parameter name="UseTrackerHitRelations" type="bool"> true </parameter>
    <parameter name="UsingParticleGun" type="bool"> false </parameter>
  </processor>

  <processor name="VertexFinder" type="LcfiplusProcessor">
    <parameter name="Algorithms" type="stringVec"> PrimaryVertexFinder BuildUpVertex </parameter>
    <parameter name="ReadSubdetectorEnergies" type="int" value="1"/> <!-- true for ILD -->
    <parameter name="UpdateVertexRPDaughters" type="int" value="1"/> <!-- false for non-updative PandoraPFOs -->
    <parameter name="TrackHitOrdering" type="int" value="1"/> <!-- Track hit ordering: 0=ILD-LOI,SID-DBD, 1=ILD-DBD -->
    <parameter name="PrintEventNumber" type="int" value="0"/> <!-- 0 for not printing event number, n for printing every n events -->
    <parameter name="PFOCollection" type="string" value="PandoraPFOs" />
    <parameter name="PrimaryVertexCollectionName" type="string" value="PrimaryVertex" />
    <parameter name="BuildUpVertexCollectionName" type="string" value="BuildUpVertex" />
    <parameter name="BuildUpVertex.V0VertexCollectionName" type="string" value="BuildUpVertex_V0" />
    <parameter name="PrimaryVertexFinder.TrackMaxD0" type="double" value="20." />
    <parameter name="PrimaryVertexFinder.TrackMaxZ0" type="double" value="20." />
    <parameter name="PrimaryVertexFinder.TrackMinVtxFtdHits" type="int" value="1" />
    <parameter name="PrimaryVertexFinder.Chi2Threshold" type="double" value="25." />
    <parameter name="BuildUpVertex.TrackMaxD0" type="double" value="10." />
    <parameter name="BuildUpVertex.TrackMaxZ0" type="double" value="20." />
    <parameter name="BuildUpVertex.TrackMinPt" type="double" value="0.1" />
    <parameter name="BuildUpVertex.TrackMaxD0Err" type="double" value="0.1" />
    <parameter name="BuildUpVertex.TrackMaxZ0Err" type="double" value="0.1" />
    <parameter name="BuildUpVertex.TrackMinTpcHits" type="int" value="10000" />
    <parameter name="BuildUpVertex.TrackMinFtdHits" type="int" value="10000" />
    <parameter name="BuildUpVertex.TrackMinVxdHits" type="int" value="10000" />
    <parameter name="BuildUpVertex.TrackMinVxdFtdHits" type="int" value="0" />
    <parameter name="BuildUpVertex.PrimaryChi2Threshold" type="double" value="25." />
    <parameter name="BuildUpVertex.SecondaryChi2Threshold" type="double" value="9." />
    <parameter name="BuildUpVertex.MassThreshold" type="double" value="10." />
    <parameter name="BuildUpVertex.MinDistFromIP" type="double" value="0.3" />
    <parameter name="BuildUpVertex.MaxChi2ForDistOrder" type="double" value="1.0" />
    <parameter name="BuildUpVertex.AssocIPTracks" type="int" value="1" />
    <parameter name="BuildUpVertex.AssocIPTracksMinDist" type="double" value="0." />
    <parameter name="BuildUpVertex.AssocIPTracksChi2RatioSecToPri" type="double" value="2.0" />
    <parameter name="BuildUpVertex.UseV0Selection" type="int" value="1" />
  </processor>

  <processor name="MyComputeShowerShapesProcessor" type="ComputeShowerShapesProcessor">
    <parameter name="Debug" type="int">0 </parameter>
    <parameter name="PFOCollection" type="string"> PandoraPFOs </parameter>
    <parameter name="ClusterCollectionName" type="string"> PandoraClusters </parameter>
    <parameter name="RadiationLength_Ecal" type="float">3.50 </parameter>
    <parameter name="RadiationLength_Hcal" type="float">17.57 </parameter>
    <parameter name="MoliereRadius_Ecal" type="float">9.00 </parameter>
    <parameter name="MoliereRadius_Hcal" type="float">17.19 </parameter>
  </processor>

  <processor name="MyLikelihoodPID" type="LikelihoodPIDProcessor">
    <parameter name="Debug" type="int">1 </parameter>
    <parameter name="EnergyBoundaries" type="FloatVec">0 1.0e+07  </parameter>
    <parameter name="FilePDFName" type="StringVec"> LikelihoodPID_Histogram_v01.root </parameter>
    <parameter name="UseLowMomentumMuPiSeparation" type="bool">true </parameter>
    <parameter name="FileWeightFormupiSeparationName" type="StringVec">
      ./weightFiles_forLowMomentumMuPiSeparation/TMVAClassification_BDTG_02GeVP_clusterinfo.weights.xml
      ./weightFiles_forLowMomentumMuPiSeparation/TMVAClassification_BDTG_03GeVP_clusterinfo.weights.xml
      ./weightFiles_forLowMomentumMuPiSeparation/TMVAClassification_BDTG_04GeVP_clusterinfo.weights.xml
      ./weightFiles_forLowMomentumMuPiSeparation/TMVAClassification_BDTG_05GeVP_clusterinfo.weights.xml
      ./weightFiles_forLowMomentumMuPiSeparation/TMVAClassification_BDTG_06GeVP_clusterinfo.weights.xml
      ./weightFiles_forLowMomentumMuPiSeparation/TMVAClassification_BDTG_07GeVP_clusterinfo.weights.xml
      ./weightFiles_forLowMomentumMuPiSeparation/TMVAClassification_BDTG_08GeVP_clusterinfo.weights.xml
      ./weightFiles_forLowMomentumMuPiSeparation/TMVAClassification_BDTG_09GeVP_clusterinfo.weights.xml
      ./weightFiles_forLowMomentumMuPiSeparation/TMVAClassification_BDTG_10GeVP_clusterinfo.weights.xml
      ./weightFiles_forLowMomentumMuPiSeparation/TMVAClassification_BDTG_11GeVP_clusterinfo.weights.xml
      ./weightFiles_forLowMomentumMuPiSeparation/TMVAClassification_BDTG_12GeVP_clusterinfo.weights.xml
      ./weightFiles_forLowMomentumMuPiSeparation/TMVAClassification_BDTG_13GeVP_clusterinfo.weights.xml
      ./weightFiles_forLowMomentumMuPiSeparation/TMVAClassification_BDTG_14GeVP_clusterinfo.weights.xml
      ./weightFiles_forLowMomentumMuPiSeparation/TMVAClassification_BDTG_15GeVP_clusterinfo.weights.xml
      ./weightFiles_forLowMomentumMuPiSeparation/TMVAClassification_BDTG_16GeVP_clusterinfo.weights.xml
      ./weightFiles_forLowMomentumMuPiSeparation/TMVAClassification_BDTG_17GeVP_clusterinfo.weights.xml
      ./weightFiles_forLowMomentumMuPiSeparation/TMVAClassification_BDTG_18GeVP_clusterinfo.weights.xml
      ./weightFiles_forLowMomentumMuPiSeparation/TMVAClassification_BDTG_19GeVP_clusterinfo.weights.xml
      ./weightFiles_forLowMomentumMuPiSeparation/TMVAClassification_BDTG_20GeVP_clusterinfo.weights.xml
    </parameter>
    
    <parameter name="dEdxParameter_electron" type="FloatVec">
      -2.40638e-03 7.10337e-01 2.87718e-01 -1.71591e+00 0.0
    </parameter>
    <parameter name="dEdxParameter_muon" type="FloatVec">
      8.11408e-02 9.92207e-01 7.58509e+05 -1.70167e-01 4.63670e-04
    </parameter>
    <parameter name="dEdxParameter_pion" type="FloatVec">
      8.10756e-02 -1.45051e+06 -3.09843e+04 2.84056e-01 3.38131e-04
    </parameter>
    <parameter name="dEdxParameter_kaon" type="FloatVec">
      7.96117e-02 4.13335e+03 1.13577e+06 1.80555e-01 -3.15083e-04
    </parameter>
    <parameter name="dEdxParameter_proton" type="FloatVec">
      7.78772e-02 4.49300e+04 9.13778e+04 1.50088e-01 -6.64184e-04
    </parameter>

    <parameter name="dEdxNormalization" type="float">
      1.350e-7
    </parameter>

    <parameter name="dEdxErrorFactor" type="float">
      7.55
    </parameter>

    <parameter name="UseBayesian" type="int">
      0
    </parameter>

    <parameter name="RecoParticleCollection" type="string">PandoraPFOs</parameter>
  </processor>

  <processor name="MyPfoAnalysis" type="PfoAnalysis">
    <parameter name="PfoCollection" type="string" lcioInType="ReconstructedParticle">PandoraPFOs </parameter>
    <parameter name="MCParticleCollection" type="string" lcioInType="MCParticle">MCParticle </parameter>
    <parameter name="CollectCalibrationDetails" type="int"> 1 </parameter>
    <parameter name="ECalCollectionsSimCaloHit" type="StringVec" lcioInType="SimCalorimeterHit">EcalBarrelCollection EcalEndcapsCollection  EcalEndcapRingCollection</parameter>
    <parameter name="ECalCollections" type="StringVec" lcioInType="CalorimeterHit">EcalBarrelCollectionRec EcalBarrelCollectionGapHits EcalEndcapsCollectionRec EcalEndcapsCollectionGapHits EcalEndcapRingCollectionRec</parameter>
    <parameter name="ECalBarrelCollections" type="StringVec" lcioInType="CalorimeterHit">EcalBarrelCollectionRec EcalBarrelCollectionGapHits</parameter>
    <parameter name="ECalEndcapCollections" type="StringVec" lcioInType="CalorimeterHit">EcalEndcapsCollectionRec EcalEndcapsCollectionGapHits EcalEndcapRingCollectionRec</parameter>
    <parameter name="HCalCollectionsSimCaloHit" type="StringVec" lcioInType="SimCalorimeterHit">HcalBarrelRegCollection HcalEndcapsCollection HcalEndcapRingCollection</parameter>
    <parameter name="HCalBarrelCollectionsSimCaloHit" type="StringVec" lcioInType="SimCalorimeterHit">HcalBarrelRegCollection</parameter>
    <parameter name="HCalEndCapCollectionsSimCaloHit" type="StringVec" lcioInType="SimCalorimeterHit">HcalEndcapsCollection</parameter>
    <parameter name="HCalOtherCollectionsSimCaloHit" type="StringVec" lcioInType="SimCalorimeterHit">HcalEndcapRingCollection</parameter>
    <parameter name="HCalCollections" type="StringVec" lcioInType="CalorimeterHit">HcalBarrelCollectionRec HcalEndcapsCollectionRec HcalEndcapRingCollectionRec </parameter>
    <parameter name="MuonCollections" type="StringVec" lcioInType="CalorimeterHit">MUON </parameter>
    <parameter name="BCalCollections" type="StringVec" lcioInType="CalorimeterHit">BCAL</parameter>
    <parameter name="LHCalCollections" type="StringVec" lcioInType="CalorimeterHit">LHCAL</parameter>
    <parameter name="LCalCollections" type="StringVec" lcioInType="CalorimeterHit">LCAL</parameter>
    <parameter name="Printing" type="int">0 </parameter>
    <parameter name="RootFile" type="string"> PfoAnalysis.root </parameter>
  </processor>

  <processor name="MyAdd4MomCovMatrixCharged" type="Add4MomCovMatrixCharged">
    <parameter name="InputPandoraPFOsCollection" type="String">PandoraPFOs</parameter>
  </processor>

  <processor name="MyAddClusterProperties" type="AddClusterProperties">
    <parameter name="PFOCollectionName" type="string" lcioInType="ReconstructedParticle">PandoraPFOs </parameter>
    <parameter name="ClusterCollection" type="string" lcioInType="Cluster">PandoraClusters </parameter>
  </processor>

  <processor name="MyPi0Finder" type="GammaGammaCandidateFinder">
    <parameter name="InputParticleCollectionName" value="PandoraPFOs" />
    <parameter name="GammaGammaResonanceName" value="Pi0" />
    <parameter name="GammaGammaResonanceMass" value="0.1349766" />
    <parameter name="MaxDeltaMgg" value="0.04" />
    <parameter name="GammaMomentumCut" value="0.5" />
    <parameter name="Printing" value="0" />
    <parameter name="OutputParticleCollectionName" value="GammaGammaCandidatePi0s" />
  </processor>

  <processor name="MyEtaFinder" type="GammaGammaCandidateFinder">
    <parameter name="InputParticleCollectionName" value="PandoraPFOs" />
    <parameter name="GammaGammaResonanceName" value="Eta" />
    <parameter name="GammaGammaResonanceMass" value="0.547862" />
    <parameter name="MaxDeltaMgg" value="0.14" />
    <parameter name="GammaMomentumCut" value="1.0" />
    <parameter name="Printing" value="0" />
    <parameter name="OutputParticleCollectionName" value="GammaGammaCandidateEtas" />
  </processor>

  <processor name="MyEtaPrimeFinder" type="GammaGammaCandidateFinder">
    <parameter name="InputParticleCollectionName" value="PandoraPFOs" />
    <parameter name="GammaGammaResonanceName" value="EtaPrime" />
    <parameter name="GammaGammaResonanceMass" value="0.95778" />
    <parameter name="MaxDeltaMgg" value="0.19" />
    <parameter name="GammaMomentumCut" value="2.0" />
    <parameter name="Printing" value="0" />
    <parameter name="OutputParticleCollectionName" value="GammaGammaCandidateEtaPrimes" />
  </processor>
  
  <processor name="MyGammaGammaSolutionFinder" type="GammaGammaSolutionFinder">
    <parameter name="InputParticleCollectionName1" value="GammaGammaCandidatePi0s" />
    <parameter name="InputParticleCollectionName2" value="GammaGammaCandidateEtas" />
    <parameter name="InputParticleCollectionName3" value="GammaGammaCandidateEtaPrimes" />
    <parameter name="Printing" value="0" />
    <parameter name="OutputParticleCollectionName" value="GammaGammaParticles" />
  </processor>

  <processor name="MyDistilledPFOCreator" type="DistilledPFOCreator">
    <parameter name="InputParticleCollectionName1" value="PandoraPFOsWithoutIsoLep" />
    <parameter name="InputParticleCollectionName2" value="GammaGammaParticles" />
    <parameter name="Printing" value="0" />
    <parameter name="OutputParticleCollectionName" value="DistilledPFOs" />
  </processor>

  <processor name="FTDDDSpacePointBuilder" type="DDSpacePointBuilder">
    <parameter name="SubDetectorName" type="string"> FTD </parameter>
    <parameter name="StripLength" type="Double"> 2.500000000e+02 </parameter>
    <parameter name="SimHitSpacePointRelCollection" type="string" lcioOutType="LCRelation"> FTDSpacePointRelations </parameter>
    <parameter name="SpacePointsCollection" type="string" lcioOutType="TrackerHit"> FTDSpacePoints </parameter>
    <parameter name="TrackerHitCollection" type="string" lcioInType="TrackerHitPlane"> FTDStripTrackerHits </parameter>
    <parameter name="TrackerHitSimHitRelCollection" type="string" lcioInType="LCRelation"> FTDStripTrackerHitRelations </parameter>
  </processor>
  
</marlin>
